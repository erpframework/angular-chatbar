!function(e){"function"==typeof define&&define.amd?define("angular-chatbar/_module",["exports"],e):"undefined"!=typeof exports&&e(exports)}(function(e){"use strict";e["default"]=angular.module("jlo-chatbar",[])}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar",["exports","angular-chatbar/chatbar"],e):"undefined"!=typeof exports&&e(exports,require("angular-chatbar/chatbar"))}(function(){"use strict"}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.directive",["exports","./_module","./utils"],e):"undefined"!=typeof exports&&e(exports,require("./_module"),require("./utils"))}(function(e,t,n){"use strict";var a=t["default"],r=n.initResizer;a.directive("jloChatbar",function(){return{restrict:"AE",transclude:!0,scope:!0,controller:["$scope","$element","$attrs","$window","jloChatbar",function(e,t,n,a,r){t.addClass("jlo-chatbar"),this.$scope=e,this.chatList=r.list,this.chatVarName=n.chat,this.ctrlVarName=n.ctrl,this.open=function(e,t){e.opened=!0,t&&r.focusChat(e.data)},this.minimize=function(e){e.opened=!1},this.remove=function(e){r.removeChat(e.data)}}],controllerAs:"chatBarCtrl",template:['<div style="display:none;" ng-transclude></div>','<jlo-chatbar-chat-internal ng-repeat="chat in chatBarCtrl.chatList track by chat.id">',"</jlo-chatbar-chat-internal>"].join("")}}),a.directive("jloChatbarMinimized",function(){return{require:"^^jloChatbar",restrict:"E",priority:700,terminal:!0,transclude:"element",link:function(e,t,n,a,r){a.minimizedTransclude=r}}}),a.directive("jloChatbarOpen",function(){return{require:"^^jloChatbar",restrict:"E",priority:700,terminal:!0,transclude:"element",link:function(e,t,n,a,r){a.openTransclude=r}}}),a.directive("jloChatbarResizer",function(){return{require:"^^jloChatbarChatInternal",restrict:"AE",transclude:"element",link:function(e,t){var n,a;n=t;do n=n.parent();while(n.length&&n[0]!==document&&"jlo-chatbar-open"!==n[0].tagName.toLowerCase());if(!n.length||n[0]===document)throw new Error("jlo-chatbar-resizer must be inside jlo-chatbar-open");a=angular.element('<div class="jlo-chatbar__resizer"></div>'),t.after(a),t.remove(),r(a,n)}}}),a.directive("jloChatbarFocus",["$q","$window",function(e,t){return{require:"^^jloChatbarChatInternal",restrict:"AE",link:function(e,n,a,r){e.$on("jlo.chatbar.focus",function(e,i){i===r.chat.data&&setTimeout(function(){n[0].focus(),t.scrollTo(0,0)},a.jloChatbarFocus&&parseInt(a.jloChatbarFocus,10)||1)})}}}])}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.internal.directive",["exports","./_module"],e):"undefined"!=typeof exports&&e(exports,require("./_module"))}(function(e,t){"use strict";var n=t["default"];n.directive("jloChatbarChatInternal",["$animate",function(e){return{require:["jloChatbarChatInternal","^^jloChatbar"],restrict:"AE",controller:function(){},link:function(t,n,a,r){var i=r[0],o=r[1];if(o.minimizedTransclude||o.openTransclude){var c=t.$new(),u={},l={remove:function(){o.remove(i.chat)},minimize:function(){o.minimize(i.chat)},open:function(e){o.open(i.chat,e)}};i.chat=t.chat,o.chatVarName&&(c[o.chatVarName]=i.chat.data),o.ctrlVarName&&(c[o.ctrlVarName]=l),n.empty().addClass("jlo-chatbar__chat").toggleClass("jlo-chatbar__chat--open",t.chat.opened),t.$watch("chat",function(e){i.chat=e,c[o.chatVarName]=i.chat.data}),t.$watch("chat.opened",function(t){setTimeout(function(){u.open&&u.open.toggleClass("jlo-chatbar__open--visible",t)},1),e[t?"addClass":"removeClass"](n,"jlo-chatbar__chat--open")}),o.openTransclude&&o.openTransclude(c,function(t){u.open=t,t.addClass("jlo-chatbar__open"),e.enter(t,n)}),o.minimizedTransclude&&o.minimizedTransclude(c,function(t){u.minimized=t,t.addClass("jlo-chatbar__minimized"),e.enter(t,n)})}}}}])}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar",["exports","./chatbar.internal.directive","./chatbar.directive","./chatbar.service"],e):"undefined"!=typeof exports&&e(exports,require("./chatbar.internal.directive"),require("./chatbar.directive"),require("./chatbar.service"))}(function(){"use strict"}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.service",["exports","./_module"],e):"undefined"!=typeof exports&&e(exports,require("./_module"))}(function(e,t){"use strict";var n=t["default"];n.provider("jloChatbar",function(){var e;this.chatId=function(t){return angular.isFunction(t)?void(e=t):void(e=function(e){return e[t]})},this.chatId("id"),this.$get=["$rootScope","$timeout",function(t,n){function a(e){return r.list.reduce(function(t,n,a){return t>=0?t:n.data===e?a:t},-1)}var r={list:[]};return r.addChat=function(i,o,c){var u,l=a(i);-1!==l&&(u=r.list.splice(l,1)[0]),o=u&&u.opened||!!o,r.list.unshift(Object.defineProperties({data:i,opened:o},{id:{get:function(){return e(this.data)},configurable:!0,enumerable:!0}})),o&&c&&n(function(){return t.$broadcast("jlo.chatbar.focus",i)})},r.focusChat=function(e){var i=a(e);-1!==i&&n(function(){return t.$broadcast("jlo.chatbar.focus",r.list[i].data)})},r.removeChat=function(e){var t=a(e);-1!==t&&r.list.splice(t,1)},r}]})}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/utils",["exports"],e):"undefined"!=typeof exports&&e(exports)}(function(e){"use strict";function t(e,t){function n(e){t.css("height",o+i-e.clientY+"px")}function a(){angular.element(document.body).removeClass("jlo-chatbar-noselect"),angular.element(document).off("mousemove",n).off("mouseup",a)}function r(e){t.data("jlo-chatbar-chat-resized",!0),i=e.clientY,o=parseInt(document.defaultView.getComputedStyle(t[0]).height,10),angular.element(document.body).addClass("jlo-chatbar-noselect"),angular.element(document).on("mousemove",n).on("mouseup",a)}var i,o;e.on("mousedown",r)}e.initResizer=t});