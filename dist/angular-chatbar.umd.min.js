!function(e){"function"==typeof define&&define.amd?define("angular-chatbar/_module",["exports"],e):"undefined"!=typeof exports&&e(exports)}(function(e){"use strict";e["default"]=angular.module("jlo-chatbar",[])}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar",["exports","angular-chatbar/chatbar"],e):"undefined"!=typeof exports&&e(exports,require("angular-chatbar/chatbar"))}(function(){"use strict"}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.directive",["exports","./_module","./chatbar.service","./utils"],e):"undefined"!=typeof exports&&e(exports,require("./_module"),require("./chatbar.service"),require("./utils"))}(function(e,t,n,i){"use strict";var a=t["default"],r=n.serviceData,o=i.applyHeight,c=i.initResizer;a.directive("jloChatbar",function(){return{restrict:"AE",transclude:!0,scope:!0,controller:["$scope","$element","$attrs","$window","jloChatbar",function(e,t,n,i,a){var c=this;t.addClass("jlo-chatbar"),this.$scope=e,this.chatList=a.list,this.chatVarName=n.chat,this.ctrlVarName=n.ctrl,this.open=function(e){e.opened=!0},this.minimize=function(e){e.opened=!1},this.remove=function(e){a.removeChat(e.data)},this.height={},(r.maxHeight||r.height)&&!function(){var n=function(){var e=i.innerHeight;c.height={maxHeight:r.maxHeight&&r.maxHeight(e),height:r.height&&r.height(e)},o(t.find("jlo-chatbar-open"),c.height)};n(),angular.element(i).on("resize",n),e.$on("$destroy",function(){angular.element(i).off("resize",n)})}()}],controllerAs:"chatBarCtrl",template:['<div style="display:none;" ng-transclude></div>','<div ng-repeat="chat in chatBarCtrl.chatList track by chat.id"',' class="jlo-chatbar__chat" ng-class="{\'jlo-chatbar__chat--open\': chat.opened}">',"<jlo-chatbar-minimized-internal></jlo-chatbar-minimized-internal>","<jlo-chatbar-open-internal></jlo-chatbar-open-internal>","</div>"].join("")}}),a.directive("jloChatbarMinimized",function(){return{require:"^^jloChatbar",restrict:"E",priority:700,terminal:!0,transclude:"element",link:function(e,t,n,i,a){i.minimizedTransclude=a}}}),a.directive("jloChatbarOpen",function(){return{require:"^^jloChatbar",restrict:"E",priority:700,terminal:!0,transclude:"element",link:function(e,t,n,i,a){i.openTransclude=a}}}),a.directive("jloChatbarResizer",function(){return{restrict:"AE",transclude:"element",link:function(e,t){var n,i;n=t;do n=n.parent();while(n.length&&"jlo-chatbar-open"!==n[0].tagName.toLowerCase());if(!n.length)throw new Error("jlo-chatbar-resizer must be inside jlo-chatbar-open");i=angular.element('<div class="jlo-chatbar__resizer"></div>'),t.after(i),t.remove(),c(i)}}})}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.internal.directive",["exports","./_module","./utils"],e):"undefined"!=typeof exports&&e(exports,require("./_module"),require("./utils"))}(function(e,t,n){"use strict";function i(e,t,n){return function(i,a,o,c){if(c[e]){var u,h,l=i.$eval("chat"),d={remove:function(){c.remove(l)},minimize:function(){c.minimize(l)},open:function(){c.open(l)}};c[e](function(e,i){u=i,c.chatVarName&&(i[c.chatVarName]=l.data),c.ctrlVarName&&(i[c.ctrlVarName]=d),h=e,a.empty(),a.after(e),a.remove(),e.addClass(t),n&&c.height&&r(e,c.height)}),n&&i.$watch("chat.opened",function(e){setTimeout(function(){h.toggleClass(t+"--visible",e)},1)}),i.$watch("chat",function(e){l=e,c.chatVarName&&(u[c.chatVarName]=l.data)})}}}var a=t["default"],r=n.applyHeight;a.directive("jloChatbarMinimizedInternal",function(){return{require:"^^jloChatbar",restrict:"AE",link:i("minimizedTransclude","jlo-chatbar__minimized")}}),a.directive("jloChatbarOpenInternal",function(){return{require:"^^jloChatbar",restrict:"AE",link:i("openTransclude","jlo-chatbar__open",!0)}})}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar",["exports","./chatbar.internal.directive","./chatbar.directive","./chatbar.service"],e):"undefined"!=typeof exports&&e(exports,require("./chatbar.internal.directive"),require("./chatbar.directive"),require("./chatbar.service"))}(function(){"use strict"}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/chatbar.service",["exports","./_module"],e):"undefined"!=typeof exports&&e(exports,require("./_module"))}(function(e,t){"use strict";function n(e){return function(t){return angular.isFunction(t)?void(a[e]=t):t.match(/%$/)?(t=parseInt(t),void(a[e]=function(e){return e*t/100})):void(a[e]=function(){return t})}}var i=t["default"],a={maxHeight:void 0,height:void 0};i.provider("jloChatbar",function(){var e;this.chatId=function(t){return angular.isFunction(t)?void(e=t):void(e=function(e){return e[t]})},this.chatId("id"),this.maxHeight=n("maxHeight"),this.height=n("height"),this.$get=function(){function t(e){return n.reduce(function(t,n,i){return t>=0?t:n.data===e?i:t},-1)}var n=[],i={};return i.addChat=function(i,a){var r,o=t(i);-1!==o&&(r=n[o],n.splice(o,1)),n.unshift(Object.defineProperties({data:i,opened:r&&r.opened||!!a},{id:{get:function(){return e(this.data)},configurable:!0,enumerable:!0}}))},i.removeChat=function(e){var i=t(e);-1!==i&&n.splice(i,1)},Object.defineProperty(i,"list",{get:function(){return n}}),i}}),e.serviceData=a}),function(e){"function"==typeof define&&define.amd?define("angular-chatbar/utils",["exports"],e):"undefined"!=typeof exports&&e(exports)}(function(e){"use strict";function t(e,t){t&&e.length&&(!angular.isUndefined(t.maxHeight)&&e.css("max-height",t.maxHeight+"px"),!angular.isUndefined(t.minHeight)&&e.css("min-height",t.minHeight+"px"),angular.forEach(e,function(e){angular.isUndefined(t.height)||angular.element(e).data("jlo-chatbar-chat-resized")||angular.element(e).css("height",t.height+"px")}))}function n(e,t){function n(e){t.css("height",o+r-e.clientY+"px")}function i(){angular.element(document.body).removeClass("jlo-chatbar-noselect"),angular.element(document).off("mousemove",n).off("mouseup",i)}function a(e){t.data("jlo-chatbar-chat-resized",!0),r=e.clientY,o=parseInt(document.defaultView.getComputedStyle(t[0]).height,10),angular.element(document.body).addClass("jlo-chatbar-noselect"),angular.element(document).on("mousemove",n).on("mouseup",i)}var r,o;e.on("mousedown",a)}e.applyHeight=t,e.initResizer=n});